/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   operator_dfa.c                                     :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: tmatthew <tmatthew@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2018/12/19 17:21:52 by tmatthew          #+#    #+#             */
/*   Updated: 2018/12/23 16:08:17 by tmatthew         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "../../includes/shell.h"

static short	g_operator_char_table[128] =
{
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 0, 6,
	6, 6, 6, 6, 4, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 2, 3, 4, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 6, 6, 6, 6,
	6, 6, 6, 6, 2, 6, 6, 6
};

static short	g_operator_transition_table[][17] =
{
/*         &,  |,  ;,  <,  -,  >,  other */
/*  0 */ { 1,  3,  5,  7, 16,  9, 16}, // start
/*  1 */ { 2, 16, 16, 16, 16, 16, 16},
/*  2 */ {16, 16, 16, 16, 16, 16, 16}, //FINAL &&
/*  3 */ {16,  4, 16, 16, 16, 16, 16},
/*  4 */ {16, 16, 16, 16, 16, 16, 16}, //FINAL ||
/*  5 */ {16, 16,  6, 16, 16, 16, 16},
/*  6 */ {16, 16, 16, 16, 16, 16, 16}, //FINAL ;;
/*  7 */ {12, 16, 16,  8, 16, 13, 16},
/*  8 */ {16, 16, 16, 16, 14, 16, 16}, //FINAL <<
/*  9 */ {11, 15, 16, 16, 16, 10, 16},
/* 10 */ {16, 16, 16, 16, 16, 16, 16}, //FINAL >>
/* 11 */ {16, 16, 16, 16, 16, 16, 16}, //FINAL >&
/* 12 */ {16, 16, 16, 16, 16, 16, 16}, //FINAL <&
/* 13 */ {16, 16, 16, 16, 16, 16, 16}, //FINAL <>
/* 14 */ {16, 16, 16, 16, 16, 16, 16}, //FINAL <<-
/* 15 */ {16, 16, 16, 16, 16, 16, 16}, //FINAL >|
/* 16 */ {16, 16, 16, 16, 16, 16, 16} //error
/*         &,  |,  ;,  <,  -,  >,  other */
};

int			process_operator(char c, t_token *token, t_lctx *ctx)
{
	short	stub;

	(void)c;
	(void)token;
	(void)ctx;
	stub = g_operator_transition_table[0][g_operator_char_table[(int)c]];
	(void)stub;
	return (SUCCESS);
}
